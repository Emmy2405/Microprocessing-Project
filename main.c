/*
Program Description: A game where a princess catches falling coins and has 3 lives 

Names: Eman , Mera and Amanda

*/

//header files
#include <stm32f031x6.h>
#include "display.h"//header to access functions that we need to display 
#include "musical_notes.h"//header to access music notes
#include "sound.h"//header to access the functions needed for music and sound
#include "serial.h"
#include <time.h>
//#include <stdlib.h>																																											

//symbolic name(s)
#define size 3

//function calls
void initClock(void);//this function initializes the clock system by configuring the PLL to generate a clock signal with a specific multiplier
void initSysTick(void);//this function initializes the SysTick timer, configures it to generate interrupts, sets an initial value for the timer, and enables interrupts globally.
void SysTick_Handler(void);//the function is designed to handle SysTick interrupts, update the state of a musical tune being played, and increment a milliseconds counter.
void delay(volatile uint32_t dly);//delay function
void setupIO();//this function is configuring the microcontroller's GPIO pins for input mode
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py);//this function provides a simple way to check if a given point is inside a rectangle
void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber);//this function is designed to enable the pull-up resistor for a specific GPIO pin
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode);//this function is responsible for setting the mode of a specific GPIO pin on a microcontroller
//functions added in
void playTune(uint32_t * the_notes, uint32_t * the_times, int length, int repeat);//function to play the song  
int RightPressed(void);//function for pressing the right button																																																																																																															
int LeftPressed(void);//function for pressing the left button
int RightNotPressed(void);//function for if the  right button isn't pressed
void mainmenu(void);//function for main menu
void countdownTimer(void);
void CoinsFalling(void);
void livescore(int);
void flicker(const);																																																																																																																																						

void redOn();//function for turning on red light 1
void redOff();//function for turning off red light 1
void red2On();//function for turning on red light 2
void red2Off();//function for turning off red light 2
void red3On();//function for turning on red light 3
void red3Off();//function for turning off red light 3

//declaring milliseconds variable
volatile uint32_t milliseconds;
volatile uint32_t countdown_seconds = 45;

//declaring variables all to do with background music
uint32_t *notes;
uint32_t *note_times;
volatile int tune_playing = 1;
volatile int tune_length = 32;
volatile int tune_index = 0;
volatile int tune_time_remaining = 0;
volatile int tune_repeat = 0;

uint16_t ob1x;
uint16_t ob1y =  20;
int delete = 0;
int lives = 3;
int score = 0;


//the code for the picture of the princess standing
const uint16_t princess[]=
{
	1533,1533,0,24327,0,24327,0,24327,0,1533,1533,1533,1533,1533,0,43507,24327,40224,24327,43507,0,1533,1533,1533,1533,1533,0,24334,24334,24334,24334,24334,0,0,1533,1533,1533,0,0,24334,0,23677,23677,24334,24334,0,1533,1533,1533,0,24334,0,23677,23677,0,23677,0,1533,1533,1533,1533,0,24334,0,23677,23677,23677,23677,0,1533,1533,1533,1533,0,24334,24334,43507,23677,23677,32693,0,1533,1533,1533,1533,24334,24334,24334,24334,0,7620,0,1533,1533,1533,1533,1533,24334,24334,24334,0,7620,7620,7620,0,1533,1533,1533,1533,24334,24334,24334,0,0,23677,0,0,1533,1533,1533,1533,24334,24334,0,0,0,23677,0,0,0,1533,1533,1533,24334,24334,0,55953,0,65535,0,55953,0,1533,1533,1533,24334,0,0,55953,0,65535,0,55953,0,1533,1533,1533,0,0,55953,56755,0,0,0,15539,55953,0,1533,1533,0,55953,56755,40644,40644,40644,40644,7620,55953,0,1533,1533,55953,56755,56755,56755,56755,56755,40644,7620,7620,55953,1533,
};
//the code for the picture of the princess walking
const uint16_t Pwalking[]= 
{
	1533,1533,0,24327,0,24327,0,24327,0,1533,1533,1533,1533,1533,0,43507,24327,40224,24327,43507,0,1533,1533,1533,1533,1533,0,24334,24334,24334,24334,24334,0,0,1533,1533,1533,0,0,24334,0,23677,23677,24334,24334,0,1533,1533,1533,0,24334,0,23677,23677,0,23677,0,1533,1533,1533,1533,0,24334,0,23677,23677,23677,23677,0,1533,1533,1533,1533,0,24334,24334,43507,23677,23677,32693,0,1533,1533,1533,1533,24334,24334,24334,24334,0,7620,0,1533,1533,1533,1533,1533,24334,24334,24334,0,7620,7620,7620,0,1533,1533,1533,1533,24334,24334,24334,0,0,23677,0,0,0,0,1533,1533,24334,24334,0,0,0,23677,23677,65535,65535,0,1533,1533,24334,24334,0,55953,0,0,0,0,0,0,1533,1533,24334,0,0,55953,40644,7620,55953,0,0,1533,1533,1533,0,0,55953,56755,7620,7620,7620,55953,0,0,1533,1533,0,55953,56755,40644,7620,7620,7620,7620,55953,0,1533,1533,55953,56755,56755,56755,56755,56755,40644,7620,7620,55953,1533,
};
//the code for the picture of the coin
const uint16_t coin[]=
{
	1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,24324,24324,24324,24324,24324,24324,1533,1533,1533,1533,1533,24324,24327,24327,24327,24327,24327,24327,24324,1533,1533,1533,24324,24327,24327,24327,24327,24327,24327,24327,24327,24324,1533,24324,24327,24327,24327,24324,24324,24324,24324,24327,24327,24327,24324,24324,24327,24327,24324,24327,24327,24327,24327,24324,24327,24327,24324,24324,24327,24327,24324,24327,24327,24327,24327,24327,24327,24327,24324,24324,24327,24327,24327,24324,24324,24324,24324,24327,24327,24327,24324,24324,24327,24327,24327,24327,24327,24327,24327,24324,24327,24327,24324,24324,24327,24327,24324,24327,24327,24327,24327,24324,24327,24327,24324,1533,24324,24327,24327,24324,24324,24324,24324,24327,24327,24324,1533,1533,1533,24324,24327,24327,24327,24327,24327,24327,24324,1533,1533,1533,1533,1533,24324,24324,24324,24324,24324,24324,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,
};


//the code for the picture of the heart
const uint16_t heart[]=
{
	1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,0,0,1533,1533,1533,0,0,1533,1533,1533,1533,0,6784,6784,0,1533,0,6784,6784,0,1533,1533,0,6784,24539,31974,6784,0,6784,31974,24539,6784,0,1533,0,6784,24539,31974,57293,6784,57293,31974,24539,6784,0,1533,0,6784,24539,57293,57293,57293,57293,57293,24539,6784,0,1533,1533,0,6784,24539,57293,57293,57293,24539,6784,0,1533,1533,1533,1533,0,6784,24539,57293,24539,6784,0,1533,1533,1533,1533,1533,1533,0,6784,24539,6784,0,1533,1533,1533,1533,1533,1533,1533,1533,0,6784,0,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,0,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,1533,
};

const uint16_t welcome[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40868,40868,40868,40868,0,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t f1[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,62676,62676,0,0,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,62676,62676,0,0,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,62676,62676,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,62676,62676,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,24327,24327,24327,24327,62676,62676,62676,62676,62676,62676,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,24327,24327,24327,24327,62676,62676,62676,62676,62676,62676,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,24327,24327,24327,24327,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,24327,24327,24327,24327,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,24327,24327,24327,24327,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,24327,24327,24327,24327,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,13474,13474,62676,62676,62676,62676,24327,24327,16142,16142,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,9293,9293,9293,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,62676,62676,62676,62676,13474,13474,62676,62676,62676,62676,24327,24327,16142,16142,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,9293,9293,9293,9293,9293,9293,9293,9293,9293,0,0,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,16142,16142,16142,16142,62676,62676,13474,13474,13474,13474,62676,62676,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,0,0,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,16142,16142,16142,16142,62676,62676,13474,13474,13474,13474,62676,62676,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,16142,16142,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,9293,9293,9293,9293,9293,9293,54815,54815,9293,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,16142,16142,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,9293,9293,9293,9293,9293,9293,54815,54815,9293,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,62676,62676,9293,9293,54815,54815,9293,9293,0,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,62676,62676,9293,9293,54815,54815,9293,9293,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,13474,13474,62676,62676,13474,13474,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,9293,9293,9293,9293,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,13474,13474,62676,62676,13474,13474,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,9293,9293,9293,9293,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,13474,13474,62676,62676,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,13474,13474,13474,13474,62676,62676,13474,13474,62676,62676,62676,62676,13474,13474,13474,13474,13474,13474,62676,62676,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,62676,62676,62676,62676,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,62676,62676,62676,62676,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,62676,62676,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,62676,62676,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,9293,9293,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,13474,13474,13474,13474,13474,13474,13474,13474,62676,62676,62676,62676,9293,9293,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,9293,9293,9293,9293,54815,54815,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62676,62676,62676,62676,62676,62676,62676,62676,62676,62676,9293,9293,9293,9293,54815,54815,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t f2[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,45261,45261,0,0,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,45261,45261,0,0,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,204,204,204,204,45261,45261,45261,45261,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,204,204,204,204,45261,45261,45261,45261,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,24327,24327,24327,24327,45261,45261,45261,45261,45261,45261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,24327,24327,24327,24327,45261,45261,45261,45261,45261,45261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,24327,24327,24327,24327,45261,45261,45261,45261,204,204,204,204,45261,45261,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,24327,24327,24327,24327,45261,45261,45261,45261,204,204,204,204,45261,45261,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,204,204,204,204,204,204,45261,45261,24327,24327,24327,24327,45261,45261,204,204,204,204,204,204,45261,45261,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,204,204,204,204,204,204,45261,45261,24327,24327,24327,24327,45261,45261,204,204,204,204,204,204,45261,45261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,204,204,45261,45261,45261,45261,24327,24327,16142,16142,45261,45261,45261,45261,204,204,204,204,45261,45261,9293,9293,9293,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,45261,45261,45261,45261,204,204,45261,45261,45261,45261,24327,24327,16142,16142,45261,45261,45261,45261,204,204,204,204,45261,45261,9293,9293,9293,9293,9293,9293,9293,9293,9293,0,0,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,16142,16142,16142,16142,45261,45261,204,204,204,204,45261,45261,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,0,0,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,16142,16142,16142,16142,45261,45261,204,204,204,204,45261,45261,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,45261,45261,16142,16142,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,9293,9293,9293,9293,9293,9293,54815,54815,9293,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,45261,45261,16142,16142,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,9293,9293,9293,9293,9293,9293,54815,54815,9293,45261,45261,204,204,204,204,204,204,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,204,204,204,204,45261,45261,45261,45261,9293,9293,54815,54815,9293,9293,0,45261,45261,204,204,204,204,204,204,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,204,204,204,204,45261,45261,45261,45261,9293,9293,54815,54815,9293,9293,0,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,204,204,45261,45261,204,204,45261,45261,204,204,204,204,204,204,204,204,45261,45261,9293,9293,9293,9293,0,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,204,204,45261,45261,204,204,45261,45261,204,204,204,204,204,204,204,204,45261,45261,9293,9293,9293,9293,0,0,0,45261,45261,204,204,204,204,204,204,45261,45261,45261,45261,204,204,204,204,45261,45261,204,204,45261,45261,45261,45261,204,204,204,204,204,204,45261,45261,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,45261,45261,45261,45261,204,204,204,204,45261,45261,204,204,45261,45261,45261,45261,204,204,204,204,204,204,45261,45261,0,0,0,0,0,0,0,45261,45261,204,204,204,204,45261,45261,45261,45261,45261,45261,204,204,204,204,204,204,204,204,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,45261,45261,45261,45261,45261,45261,204,204,204,204,204,204,204,204,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,45261,45261,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,45261,45261,0,0,45261,45261,204,204,204,204,204,204,204,204,204,204,45261,45261,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,204,204,45261,45261,45261,45261,9293,9293,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,204,204,204,204,204,204,204,204,45261,45261,45261,45261,9293,9293,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,9293,9293,9293,9293,54815,54815,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45261,45261,45261,45261,45261,45261,45261,45261,45261,45261,9293,9293,9293,9293,54815,54815,9293,9293,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,54815,54815,54815,54815,54815,54815,54815,54815,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9293,9293,9293,9293,9293,9293,9293,9293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t crown[]=
{
	0,0,0,0,0,0,0,59722,59722,0,0,0,0,0,0,0,0,0,0,0,0,59722,59722,0,0,0,0,0,0,0,0,59722,59722,0,0,0,59722,8128,65535,59722,0,0,0,0,0,0,0,0,0,0,59722,8128,65535,59722,0,0,0,59722,59722,0,59722,8128,65535,59722,0,0,59722,8128,8128,59722,0,0,0,0,59722,59722,0,0,0,0,59722,8128,8128,59722,0,0,59722,8128,65535,59722,59722,8128,8128,59722,0,0,0,59722,59722,0,0,0,0,59722,8128,65535,59722,0,0,0,0,59722,59722,0,0,0,59722,8128,8128,59722,0,59722,59722,0,0,0,59722,24327,16142,59722,0,0,0,59722,8128,8128,59722,0,0,0,59722,24327,16142,59722,0,0,0,59722,59722,0,0,59722,24327,59722,0,0,59722,24327,16142,59722,0,0,0,0,59722,59722,0,0,0,0,59722,24327,16142,59722,0,0,59722,16142,59722,0,0,59722,24327,59722,0,59722,24327,24327,24327,16142,59722,0,0,59722,24327,24327,59722,0,0,59722,24327,24327,24327,16142,59722,0,59722,16142,59722,0,0,59722,24327,24327,59722,24327,24327,24327,24327,24327,16142,59722,0,59722,24327,24327,59722,0,59722,24327,24327,24327,24327,24327,16142,59722,24327,16142,59722,0,0,59722,24327,24327,59722,16142,24327,24327,24327,24327,24327,16142,59722,24327,24327,24327,24327,59722,16142,24327,24327,24327,24327,24327,16142,59722,24327,16142,59722,0,0,59722,24327,24327,24327,59722,16142,24327,24327,24327,16142,59722,24327,24327,24327,24327,24327,24327,59722,16142,24327,24327,24327,16142,59722,24327,24327,16142,59722,0,0,59722,24327,24327,24327,24327,59722,59722,59722,59722,59722,24327,24327,24327,24327,24327,24327,24327,24327,59722,59722,59722,59722,59722,24327,24327,24327,16142,59722,0,0,59722,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,16142,59722,0,0,59722,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,16142,59722,0,0,59722,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,16142,59722,0,0,59722,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,8128,65535,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,24327,16142,59722,0,0,59722,24327,24327,24327,24327,0,0,16142,24327,24327,24327,0,8128,8128,8128,65535,0,16142,24327,24327,24327,0,0,16142,24327,24327,16142,59722,0,0,59722,24327,24327,24327,0,8128,65535,0,16142,24327,24327,0,8128,8128,8128,8128,0,16142,24327,24327,0,8128,65535,0,16142,24327,16142,59722,0,0,59722,24327,24327,24327,0,8128,8128,0,16142,24327,24327,0,8128,8128,8128,8128,0,16142,24327,24327,0,8128,8128,0,16142,24327,16142,59722,0,0,59722,24327,24327,24327,24327,0,0,16142,24327,24327,24327,24327,0,8128,8128,0,16142,24327,24327,24327,24327,0,0,16142,24327,24327,16142,59722,0,0,0,59722,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,16142,16142,59722,0,0,0,0,0,59722,59722,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,16142,16142,16142,16142,16142,16142,59722,59722,0,0,0,0,0,0,0,0,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,59722,0,0,0,0,0,
};
const uint16_t grass[]=
{
	26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,40224,40224,26901,26901,26901,33314,33314,26901,26901,26901,26901,33314,33314,26901,26901,26901,26901,26901,40224,40224,26901,26901,26901,33314,33314,26901,26901,26901,26901,33314,33314,26901,26901,26901,40224,40224,24327,24327,40224,40224,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,40224,40224,24327,24327,40224,40224,26901,26901,26901,26901,21138,21138,26901,26901,33314,26901,26901,26901,26901,26901,40224,40224,26901,26901,26901,26901,26901,26901,21138,21138,26901,26901,26901,26901,26901,26901,26901,26901,40224,40224,26901,26901,26901,26901,21138,21138,24327,24327,21138,21138,26901,26901,26901,26901,26901,26901,26901,26901,33314,33314,26901,26901,21138,21138,24327,24327,21138,21138,26901,26901,26901,26901,26901,26901,26901,26901,33314,33314,26901,26901,26901,26901,21138,21138,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,21138,21138,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,26901,
};

//array of the tune notes for the song
uint32_t tune_notes[] = {   CS6_Db6, D6, FS5_Gb5, A5, FS5_Gb5, CS6_Db6, FS5_Gb5, A5, FS5_Gb5,    
							CS6_Db6, FS5_Gb5, A5, CS6_Db6, FS5_Gb5, A5, CS6_Db6,
							D6, G5, B5, G5, D6, G5, B5, G5,     
							D6, G5, B5, D6, G5, B5, D6,
							CS6_Db6, D6, FS5_Gb5, A5, FS5_Gb5, CS6_Db6, FS5_Gb5, A5, FS5_Gb5,    
							CS6_Db6, FS5_Gb5, A5, CS6_Db6, FS5_Gb5, A5, CS6_Db6,
							D6, G5, B5, G5, D6, G5, B5, G5,     
							D6, G5, B5, D6, B5, G5, B5,};


//array of the time of each note playing in the song
uint32_t tune_times[] = {	28, 160, 188, 188, 188, 188, 188, 188, 188, 
							188, 188, 188, 376, 188, 188, 188,
							188, 188, 188, 188, 188, 188, 188, 188,
							188, 188, 188, 376, 188, 188, 188,
							28, 160, 188, 188, 188, 188, 188, 188, 188,
							188, 188, 188, 376, 188, 188, 188, 
							188, 188, 188, 188, 188, 188, 188, 188, 
							188, 188, 188, 376, 188, 188, 188,};

void mainmenu(void)//main menu function
{//beginning of main menu function


	fillRectangle(0,0,SCREEN_WIDTH, SCREEN_HEIGHT, RGBToWord(0, 0, 0 ));//filling the background in black
	//printTextX2("Welcome!", 20, 50, RGBToWord(255, 102, 255), RGBToWord(0, 0, 0));//printing welcome text
	putImage(0,24,128,42,welcome,0,0);
	//putImage(80,0,39,39,f1,0,0);
	putImage(78,18,30,22,crown,0,0);
	printText("to Crown Catch!",10, 70, RGBToWord(246,143,160), RGBToWord(0, 0, 0));
	//printText(" Treasure Quest!", 0, 100, RGBToWord(246,143,160), RGBToWord(0, 0, 0));
	printText("Please press right", 1, 110, RGBToWord(153, 0, 255), RGBToWord(0, 0, 0));
    printText("button to begin!", 10, 120, RGBToWord(153, 0, 255), RGBToWord(0, 0, 0));

	do
	{//beginning of do while loop
        
		if(RightPressed())//if the user presses the right button
		{
			clear();//clear the main menu and enter the game
		}

	} while (RightNotPressed());//end of do while loop

}//end of main menu function

// Function to generate random numbers
uint32_t random(uint32_t max) 
{
    return rand() % 116;
}


int main()
{//beginning of main function

	//declaring variables for the movement of the characters
	int hinverted = 0;
	int vinverted = 0;
	int toggle = 0;
	int hmoved = 0;
	int score = 0;
	//int lives = 3;
	//int vmoved = 0;
	uint16_t x = 50;
	uint16_t y = 50;
	uint16_t oldx = x;
	uint16_t oldy = y;
	//calling on functions
	initClock();
	initSysTick();
	setupIO();
	mainmenu();
	initSound();
    initSerial();
	
	/*printNumberX2(ran,10,20,0xffff,0);
	ran = random(2,10);
	printNumberX2(ran,10,40,0xffff,0);*/
	fillRectangle(0,0,128,160,RGBToWord( 76, 187, 23 ));// to change background colour grass
	fillRectangle(0,0,128,120,RGBToWord( 47, 176, 255 ));//to change sky
	putImage(5,125,18,11,grass,0,0);
	putImage(20,143,18,11,grass,0,0);
	putImage(52,130,18,11,grass,0,0);
	putImage(110,149,18,11,grass,0,0);
	putImage(100,125,18,11,grass,0,0);
	//placing the heart images on screen
	putImage(110,05,12,16,heart,0,0);
	putImage(95,05,12,16,heart,0,0);
	putImage(80,05,12,16,heart,0,0);
	playTune(tune_notes, tune_times, tune_length, 0);//function for the song
	//countdownTimer();
	//CoinsFalling();

	srand(0);

	while(1)//beginning of while loop for movement of the princess and the coins
	{
		redOn();
		red2On();
		red3On();

		//hmoved = vmoved = 0;
		hmoved  = 0;
		hinverted = vinverted = 0;

		if (RightPressed()) // if the user presses the right button
		{//beginning of if statement	

			if (x < 112)
			{//beginning of inner if statement
				x = x + 1;
				hmoved = 1;
				hinverted=0;
			}//end of inner if statement	

		}//bend of if statement

		if (LeftPressed())// if the user presses the left button
		{//beginning of if statement		
			
			if (x > 0)
			{//beginning of inner if statement
				x = x - 1;
				hmoved = 1;
				hinverted=1;
			}//end  of if statement

		}//end  of if statement
		
		for (int i = 0; i < 10; i++)
    	{
			int randomDelay = rand() % 100; // Generate a random delay 
			delay(randomDelay);

			//code for coin falling from random places
			uint32_t ob1x = random(117);
			int ob1y = 20; // Initialize ob1y for this coin
			int delete = 0; // Initialize delete for this coin


			while(ob1y != 104 && ob1x > 0)
			{
				fillRectangle(ob1x, ob1y, 12, 16, RGBToWord(47, 176, 255));
				ob1y++;
				putImage(ob1x, ob1y, 12, 16, coin, 0, 0);

				if (ob1y < 20)
				{
					fillRectangle(ob1x, ob1y, 12, 16, RGBToWord(47, 176, 255));
					delay(15);
				}
				delay(20);

				if(isInside(ob1x, ob1y+16, 12, 16, x, y) || isInside(ob1x, ob1y+16, 12, 16, x+12, y) || isInside(ob1x, ob1y+16, 12, 16, x, y+16) || isInside(ob1x, ob1y+16, 12, 16, x+12, y+16))
				{
					clearImage(ob1x, ob1y, 12, 16);
					putImage(x,104,12,16,princess,hinverted,0);
					score++;
				}

				if(isInside(ob1x+12, ob1y+16, 12, 16, x, y) || isInside(ob1x+12, ob1y+16, 12, 16, x+12, y) || isInside(ob1x+12, ob1y+16, 12, 16, x, y+16) || isInside(ob1x, ob1y, 12, 16, x+12, y+16))
				{
					clearImage(ob1x, ob1y, 12, 16);
					putImage(x,104,12,16,princess,hinverted,0);
					score++;
				}

				if (ob1y == 104 && delete == 0)
				{
					clearImage(ob1x, ob1y, 12, 16);
					delete++;
					lives--;
					livescore(lives);
				}
			}
		}
		
		if (/*(vmoved) ||*/ (hmoved))//if statement to call the princess and move her left and right
		{//beginning of if statement 

			// only redraw if there has been some movement (reduces flicker)
			fillRectangle(oldx,oldy,12,16,RGBToWord( 47, 176, 255 ));//background of the princess
			oldx = x;
			oldy = y;	
			//countdownTimer();				
			if (hmoved)
			{//beginning of inner  if statement 
				if (toggle)//for princess standing
					putImage(x,104,12,16,princess,hinverted,0);
				else//princess walking image
					putImage(x,104,12,16,Pwalking,hinverted,0);
				
				toggle = toggle ^ 1;
			}//end ofinner if statement

		}//end of if statement 

		delay(50);
	

	}//end of while loop
	return 0;


}//end of main function


void initSysTick(void)//this function initializes the SysTick timer with a reload value of 48000, configures it to generate interrupts, sets an initial value for the timer, and enables interrupts globally.
{

	//This sets the reload value of the SysTick timer to 48000. The SysTick timer will count down from this value to zero, generating periodic interrupts.
	SysTick->LOAD = 48000;
	//this sets the control register for the SysTick timer
	SysTick->CTRL = 7;
	//this sets the current value of the SysTick timer. sometimes used as an offset to control when the SysTick interrupt will occur after the timer is enabled
	SysTick->VAL = 10;
	// The cpsie i instruction is an ARM Cortex-M assembly instruction that sets the I-bit in the CPSR (Current Program Status Register), enabling interrupts.
	__asm(" cpsie i "); // enable interrupts globally

}//end of initSysTick function

void SysTick_Handler(void)//the function is designed to handle SysTick interrupts, update the state of a musical tune being played, and increment a milliseconds counter.
{//beginng of function

	if (tune_playing)//checks whether a tune is currently playing and executes the code if there is
    {//beginning of if statement

		//decrements the variable that represents the time remaining for the current note in the tune 
        tune_time_remaining --;

        if (tune_time_remaining <= 0)//if the tune_time_remaining <= 0 it means the current note duration has finished
        {//beginning of inner if statement

			//incrementing to move onto next note
            tune_index ++;

            if (tune_index >= tune_length)//checking if tune_index has reached the end of the tune
            {//beginning of inner if statement

                tune_index = 0;//wraps around to the beginning of the tune 

            }//end  of inner if statement

            tune_time_remaining = note_times[tune_index];//update tune_time_remaining with the duration of the new current note
            playNote(notes[tune_index]);//calling the playnote function with the notes to play the note

        }//end  of inner if statement
        
    }//end of if statement

	//incrementing to represent the elapsed time in milliseconds
	milliseconds++;

	if (milliseconds % 1000 == 0 && countdown_seconds >= 0)
    {
        printTime(0, countdown_seconds, 50, 150, RGBToWord(0, 0, 0), RGBToWord(76, 187, 23));
        countdown_seconds--;
		if(countdown_seconds == 0)
    	{
        	//GAME OVER page
    	}
    }

}//end of SysTick_Handler function


void initClock(void)//this function initializes the clock system by configuring the PLL to generate a clock signal with a specific multiplier
{//beginning of initClock function 

// This is potentially a dangerous function as it could
// result in a system with an invalid clock signal - result: a stuck system
        // Set the PLL up
        // First ensure PLL is disabled
        RCC->CR &= ~(1u<<24);//Clear the PLL enable bit (bit 24) in the RCC (Reset and Clock Control) control register 
        while( (RCC->CR & (1 <<25))); // wait for PLL ready to be cleared
        
// Warning here: if system clock is greater than 24MHz then wait-state(s) need to be
// inserted into Flash memory interface

		//Set the latency for the Flash memory interface to one wait state		
        FLASH->ACR |= (1 << 0);
        FLASH->ACR &=~((1u << 2) | (1u<<1));
        // Turn on FLASH prefetch buffer
        FLASH->ACR |= (1 << 4);
        // set PLL multiplier to 12 (yielding 48MHz)
        RCC->CFGR &= ~((1u<<21) | (1u<<20) | (1u<<19) | (1u<<18));
        RCC->CFGR |= ((1<<21) | (1<<19) ); 

        // Need to limit ADC (Analog-to-Digital Converter) clock to below 14MHz so will change ADC prescaler to 4
        RCC->CFGR |= (1<<14);

        // and turn the PLL (Phase-Locked Loop) back on again
        RCC->CR |= (1<<24);        
        // set PLL as system clock source 
        RCC->CFGR |= (1<<1);

}//end of initClock function

void delay(volatile uint32_t dly)//function that causes the program to pause execution for a specified amount of time.
{//beginning of function

	uint32_t end_time = dly + milliseconds;//Calculates the end time by adding the specified delay (dly) to the current value of the volatile variable milliseconds

	while(milliseconds != end_time)//This creates a loop that continuously checks if the current value of milliseconds is equal to the calculated end_time
		__asm(" wfi "); // sleep

	//wfi = wait for interrupt

}//end of delay function

void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber)// this function is designed to enable the pull-up resistor for a specific GPIO pin
{//beginning of function

	//This line clears the bits responsible for configuring the pull-up or pull-down resistors for the specified GPIO pin. It uses bitwise operations to clear the relevant bits.
	Port->PUPDR = Port->PUPDR &~(3u << BitNumber*2); // clear pull-up resistor bits
	//This line sets the specific bit in the GPIO configuration register to enable the pull-up resistor for the specified GPIO pin. It uses bitwise operations to set the relevant bit.
	Port->PUPDR = Port->PUPDR | (1u << BitNumber*2); // set pull-up bit

}//end of enablePullUp function

void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode)//this function is responsible for setting the mode of a specific GPIO pin on a microcontroller
{//beginning of function
	
	//This line reads the current value of the MODER register for the specified GPIO port and stores it in the mode_value varible
	uint32_t mode_value = Port->MODER;
	//this line left-shifts the Mode value by 2 positions . this is done to prepare the Mode value to be inserted into the appropriate bit positions in the 'mode_value'
	Mode = Mode << (2 * BitNumber);
	//This line clears the two bits responsible for configuring the mode of the specified GPIO pin. It uses bitwise operations to perform the clear operation.
	mode_value = mode_value & ~(3u << (BitNumber * 2));
	//This line sets the two bits for the specified GPIO pin with the new mode value. It uses bitwise operations to perform the set operation.
	mode_value = mode_value | Mode;
	//This line writes the modified mode_value back to the MODER register for the specified GPIO port, th
	Port->MODER = mode_value;

}//end of pinMode function

int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py)//this function provides a  to check if a given point is inside a rectangle
{//beginning of function

	// checks to see if point px,py is within the rectange defined by x,y,w,h
	uint16_t x2,y2;
	x2 = x1+w;//Calculates the x-coordinate of the bottom-right corner of the rectangle
	y2 = y1+h;//Calculates the y-coordinate of the bottom-right corner of the rectangle
	int rvalue = 0;

	if ( (px >= x1) && (px <= x2))//Checks if the x-coordinate of the point is greater than or equal to the left edge of the rectangle (x1) and less than or equal to the right edge of the rectangle (x2)
	{//beginning of if statement

		// ok, x constraint met
		if ( (py >= y1) && (py <= y2))// Checks if the y-coordinate of the point is greater than or equal to the top edge of the rectangle (y1) and less than or equal to the bottom edge of the rectangle (y2)
			rvalue = 1;

	}//end of if statement

	//function returns the value indicating whether the point (px, py) is inside the specified rectangle
	return rvalue;

}//end of isInside function

void setupIO()//this function is configuring the microcontroller's GPIO pins for input mode
{//beginning of function

	RCC->AHBENR |= (1 << 18) + (1 << 17); // enable Ports A and B . RCC (Reset and Clock Control) register is being modified to enable the clock for these specific ports.
	display_begin();//responsible for initializing a display or some other output device
	pinMode(GPIOB,4,0);//Configures pin 4 of GPIOB as an input.
	pinMode(GPIOB,5,0);//Configures pin 5 of GPIOB as an input.
	pinMode(GPIOA,8,0);//Configures pin 8 of GPIOB as an input.
	pinMode(GPIOA,11,0);//Configures pin 11 of GPIOB as an input.

	pinMode(GPIOA,10,1); // Make GPIOA bit 10 an output
    pinMode(GPIOA,12,1); // Make GPIOA bit 12  an output
    pinMode(GPIOB,3,1); // Make GPIOB bit 3 an output

	enablePullUp(GPIOB,4);//Enables the pull-up resistor for pin 4 of GPIOB.
	enablePullUp(GPIOB,5);//Enables the pull-up resistor for pin 5 of GPIOB.
	enablePullUp(GPIOA,11);//Enables the pull-up resistor for pin 8 of GPIOB.
	enablePullUp(GPIOA,8);//Enables the pull-up resistor for pin 11 of GPIOB.

	enablePullUp(GPIOA,10);
	enablePullUp(GPIOA,12);
	enablePullUp(GPIOB,3);

}//end of setupIO function

void playTune(uint32_t * the_notes, uint32_t * the_times, int length, int repeat)
{
    notes = the_notes;
    tune_index = 0;
    note_times = the_times;
    tune_length = length;
    tune_repeat = repeat;
    tune_playing = 1;
    tune_time_remaining = note_times[0];
}


int RightPressed()
{
	if((GPIOB->IDR & (1 << 4))==0)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int LeftPressed()
{
	if((GPIOB->IDR & (1 << 5))==0)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}



int RightNotPressed()
{
	if((GPIOB->IDR & (1 << 4))!=0)
	{
		return 1;
	}
	else
	{
		return 0;
	}
	
}


/*void countdownTimer()
{
    uint32_t countdown_seconds = 45;

    while (countdown_seconds > 0)
    {
        printTime(0, countdown_seconds, 50, 150, RGBToWord(0, 0, 0), RGBToWord(76, 187, 23));
        countdown_seconds--;
		CoinsFalling();
        delay(1000);
    }
    
    /*if(countdown_seconds == 0)
    {
        //GAME OVER page
    }*/


void redOn(void)
{
    GPIOA->ODR = GPIOA->ODR | (1 << 10);
	
}
void redOff(void)
{
    GPIOA->ODR = GPIOA->ODR &  (0 << 10);
}
void red2On(void)
{
    GPIOA->ODR = GPIOA->ODR | (1 << 12);
}
void red2Off(void)
{
    GPIOA->ODR = GPIOA->ODR &  (0 << 12);
}
void red3On(void)
{
    GPIOB->ODR = GPIOB->ODR | (1 << 3);
}
void red3Off(void)
{
    GPIOB->ODR = GPIOB->ODR &  (0 << 3);
}

void livescore(int lives)
{
	if(lives == 2)
	{
		red3Off();//make the light flash before 
		//code to clear the heart . make the heart flash before disappearing 
		flicker(heart);
		//code to pause the game, reset the timer and reset the game
	}
	if(lives == 1)
	{
		//red2Off();
		//code to clear the heart
		clearImage(95, 05, 12, 16);
		//code to pause the game, reset the timer and reset the game
	}
	if(lives == 0)
	{
		//redOff();
		//code to clear the heart
		clearImage(110, 05,12, 16);
		//insert function for game over page
	}
}

void flicker(heart)
{
	for (int flicker = 0; flicker < 3; ++flicker) {
        // Display the image
        putImage(110, 05, 12, 16, heart, 0, 0); // Adjust parameters accordingly
        
        // Delay for a short duration
        delay(15); // Adjust delay for flicker speed

        // Turn off the image (assuming the display function provides a way to clear the image)
        // Here, we assume there's a function to clear the image or turn off the display
        clearImage(80, 05 , 12,  16); // Function to clear the image

        // Delay for a short duration before flickering again
        delay(15); // Adjust delay for flicker speed
    }
}
